# BasiMaterial æµ‹è¯•æ¡ˆä¾‹ä½¿ç”¨è¯´æ˜

## ğŸ“ æ–‡ä»¶ç»“æ„

```
aether3d/
â”œâ”€â”€ Engine/
â”‚   â””â”€â”€ materials/
â”‚       â”œâ”€â”€ BasiMaterial.ts          # BasiMaterial ç±»å®ç°
â”‚       â””â”€â”€ BasiMaterial.md          # BasiMaterial ä½¿ç”¨æ–‡æ¡£
â””â”€â”€ src/
    â””â”€â”€ 3dHome/
        â””â”€â”€ components/
            â””â”€â”€ BasiMaterialTest.tsx # æµ‹è¯•æ¡ˆä¾‹ç»„ä»¶
```

## ğŸ¯ æµ‹è¯•æ¡ˆä¾‹åŠŸèƒ½

### BasiMaterialTest ç»„ä»¶

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ React æµ‹è¯•ç»„ä»¶ï¼Œå±•ç¤ºäº† BasiMaterial çš„æ‰©æ•£åŠ¨ç”»æ•ˆæœï¼š

#### ğŸŒŸ ä¸»è¦ç‰¹æ€§
- **å››ä¸ªæµ‹è¯•ç½‘æ ¼**ï¼šå±•ç¤ºä¸åŒå‚æ•°é…ç½®çš„æ‰©æ•£æ•ˆæœ
- **å¤šç§å‡ ä½•ä½“**ï¼šæ”¯æŒå¹³é¢ã€ç«‹æ–¹ä½“ã€çƒä½“ã€åœ†å½¢
- **å®æ—¶æ§åˆ¶**ï¼šæ—‹è½¬å¼€å…³ã€æ—¶é—´é‡ç½®
- **åŠ¨æ€å‚æ•°**ï¼šä¸åŒçš„æ‰©æ•£é€Ÿåº¦å’Œé¢œè‰²

#### ğŸ¨ è§†è§‰æ•ˆæœ
- ğŸ”´ çº¢è‰²ï¼šæ ‡å‡†é€Ÿåº¦æ‰©æ•£ (speed: 1)
- ğŸŸ¢ ç»¿è‰²ï¼šå¿«é€Ÿæ‰©æ•£ (speed: 2) 
- ğŸ”µ è“è‰²ï¼šæ…¢é€Ÿæ‰©æ•£ (speed: 0.5)
- ğŸŸ¡ é»„è‰²ï¼šä¸­é€Ÿæ‰©æ•£ (speed: 1.5)

#### ğŸ® äº¤äº’æ§åˆ¶
- **å‡ ä½•ä½“åˆ‡æ¢**ï¼šå®æ—¶åˆ‡æ¢ä¸åŒå‡ ä½•ä½“ç±»å‹
- **æ—‹è½¬æ§åˆ¶**ï¼šå¼€å¯/åœæ­¢æ•´ä½“æ—‹è½¬åŠ¨ç”»
- **æ—¶é—´é‡ç½®**ï¼šé‡ç½®æ‰©æ•£åŠ¨ç”»æ—¶é—´
- **è§†è§’æ§åˆ¶**ï¼šé¼ æ ‡æ‹–æ‹½æ—‹è½¬ï¼Œæ»šè½®ç¼©æ”¾

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. ä½œä¸ºç‹¬ç«‹ç»„ä»¶ä½¿ç”¨

```typescript
import BasiMaterialTest from './src/3dHome/components/BasiMaterialTest';

function App() {
  return <BasiMaterialTest />;
}
```

### 2. åœ¨ç°æœ‰é¡¹ç›®ä¸­é›†æˆ

```typescript
import { BasiMaterial, handleBeforeMaterial } from './Engine';
import { THREE } from './Engine/core/global';

// æ–¹å¼ä¸€ï¼šä½¿ç”¨ BasiMaterial ç±»
const time = { value: 0 };
const material = new BasiMaterial({
    color: "#444",
    highlightColor: "#ff0000",
    speed: 1,
    radius: 50,
    time: time
});

// æ–¹å¼äºŒï¼šä½¿ç”¨ä¾¿æ·å‡½æ•°
const basicMaterial = new THREE.MeshBasicMaterial();
handleBeforeMaterial(basicMaterial, time);

// åœ¨æ¸²æŸ“å¾ªç¯ä¸­æ›´æ–°æ—¶é—´
function animate() {
    time.value += deltaTime;
    renderer.render(scene, camera);
    requestAnimationFrame(animate);
}
```

## ğŸ”§ æŠ€æœ¯å®ç°

### æ ¸å¿ƒç€è‰²å™¨åŠŸèƒ½
- **æ‰‡å½¢æ‰©æ•£**ï¼šä½¿ç”¨ atan2 å‡½æ•°è®¡ç®—è§’åº¦
- **è·ç¦»è¡°å‡**ï¼šåŸºäºè·ç¦»çš„é€æ˜åº¦æ§åˆ¶
- **é¢œè‰²æ··åˆ**ï¼šå¹³æ»‘çš„é¢œè‰²è¿‡æ¸¡æ•ˆæœ
- **æ—¶é—´é©±åŠ¨**ï¼šè¿ç»­çš„åŠ¨ç”»å¾ªç¯

### å‚æ•°é…ç½®
| å‚æ•° | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| speed | number | 1 | æ‰©æ•£é€Ÿåº¦å€æ•° |
| radius | number | 100 | æ‰©æ•£æœ€å¤§åŠå¾„ |
| width | number | Ï€/2 | æ‰‡å½¢è§’åº¦å®½åº¦ |
| highlightColor | Color | #ff0000 | é«˜äº®æ‰©æ•£é¢œè‰² |

## ğŸ“š æ‰©å±•ç”¨é€”

### é€‚ç”¨åœºæ™¯
- **é›·è¾¾æ‰«ææ•ˆæœ**ï¼šå†›äº‹/ç§‘æŠ€ç•Œé¢
- **èƒ½é‡æ³¢åŠ¨ç”»**ï¼šæ¸¸æˆç‰¹æ•ˆ
- **èŒƒå›´æŒ‡ç¤ºå™¨**ï¼šæˆ˜ç•¥æ¸¸æˆ
- **ç§‘å¹»UIå…ƒç´ **ï¼šæœªæ¥æ„Ÿç•Œé¢

### è‡ªå®šä¹‰å¼€å‘
1. **ä¿®æ”¹ç€è‰²å™¨**ï¼šè°ƒæ•´ `BasiMaterial.ts` ä¸­çš„ GLSL ä»£ç 
2. **æ·»åŠ å‚æ•°**ï¼šæ‰©å±• `BasiMaterialParameters` æ¥å£
3. **åˆ›å»ºå˜ä½“**ï¼šç»§æ‰¿ `BasiMaterial` ç±»å®ç°æ–°æ•ˆæœ

## ğŸ¨ æ•ˆæœé¢„è§ˆ

æµ‹è¯•ç»„ä»¶å±•ç¤ºäº†ä»¥ä¸‹æ•ˆæœç»„åˆï¼š
- ä¸åŒæ‰©æ•£é€Ÿåº¦çš„å¯¹æ¯”
- å¤šç§å‡ ä½•ä½“ä¸Šçš„é€‚é…æ€§
- å®æ—¶å‚æ•°è°ƒæ•´çš„å“åº”æ€§
- 3D ç©ºé—´ä¸­çš„è§†è§‰å±‚æ¬¡

## ğŸ’¡ å¼€å‘æç¤º

1. **æ€§èƒ½ä¼˜åŒ–**ï¼šå¯¹äºå¤§é‡å®ä¾‹ï¼Œè€ƒè™‘ä½¿ç”¨ InstancedMesh
2. **æ—¶é—´ç®¡ç†**ï¼šå»ºè®®ä½¿ç”¨å…¨å±€æ—¶é—´ uniform å‡å°‘å¼€é”€
3. **æè´¨å…¼å®¹**ï¼šBasiMaterial åŸºäº MeshBasicMaterialï¼Œä¸å—å…‰ç…§å½±å“
4. **è°ƒè¯•æ¨¡å¼**ï¼šå¯ä»¥é€šè¿‡æ§åˆ¶å°æŸ¥çœ‹å‚æ•°å˜åŒ–æ—¥å¿—

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **æ‰©æ•£æ•ˆæœä¸æ˜¾ç¤º**ï¼šæ£€æŸ¥æ—¶é—´ uniform æ˜¯å¦æ­£ç¡®æ›´æ–°
2. **æ€§èƒ½é—®é¢˜**ï¼šå‡å°‘åŒæ—¶æ¸²æŸ“çš„æè´¨æ•°é‡
3. **é¢œè‰²å¼‚å¸¸**ï¼šç¡®è®¤ Three.js é¢œè‰²æ ¼å¼æ­£ç¡®

### è°ƒè¯•æ–¹æ³•
```typescript
// å¯ç”¨ç€è‰²å™¨è°ƒè¯•
material.onBeforeCompile = (shader) => {
    console.log('Vertex Shader:', shader.vertexShader);
    console.log('Fragment Shader:', shader.fragmentShader);
    // ... å…¶ä»–é€»è¾‘
};
```

è¿™ä¸ªæµ‹è¯•æ¡ˆä¾‹ä¸º BasiMaterial æä¾›äº†å®Œæ•´çš„æ¼”ç¤ºå’ŒéªŒè¯å¹³å°ï¼Œä¾¿äºå¼€å‘è€…ç†è§£å’Œä½¿ç”¨æ‰©æ•£åŠ¨ç”»æ•ˆæœã€‚